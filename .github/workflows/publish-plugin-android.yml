name: Publish RNRepo Gradle Plugin for Android

run-name: Publish RNRepo Gradle Plugin for Android

on:
  workflow_dispatch:

jobs:
  build-rnrepo-plugin-android:
    runs-on: ubuntu-latest

    steps:
      - name: üèó Checkout repository
        uses: actions/checkout@v4

      - name: üî® Build RNRepo Gradle Plugin for Android
        run: ./gradlew build
        working-directory: ./packages/client/rnrepo-plugin

      - name: üì¶ Publish RNRepo Gradle Plugin for Android
        run: |
          ./gradlew publishReleasePublicationToRnrepoRepository --no-daemon \
          -PmavenUsername=${{ secrets.RNREPO_SWM_PUBLISHER_USERNAME_DEV }} \
          -PmavenPassword=${{ secrets.RNREPO_SWM_PUBLISHER_TOKEN_DEV }} \
          -PsigningKey="${{ secrets.GPG_PRIVATE_KEY }}" \
          -PsigningPassword="${{ secrets.GPG_PASSPHRASE }}"
        working-directory: ./packages/client/rnrepo-plugin
